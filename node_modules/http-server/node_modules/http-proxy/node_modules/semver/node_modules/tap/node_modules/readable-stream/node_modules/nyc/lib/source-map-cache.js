var path = require('path')
var SourceMapConsumer = require('source-map').SourceMapConsumer

function SourceMapCache () {
  this.cache = {}
}

SourceMapCache.prototype.addMap = function (absFile, map) {
  this.cache[absFile] = new SourceMapConsumer(map)
}

SourceMapCache.prototype.applySourceMaps = function (report) {
  var _this = this

  Object.keys(report).forEach(function (absFile) {
    var sourceMap = _this.cache[absFile]
    if (!sourceMap) {
      return
    }

    var fileReport = report[absFile]
  